import{u as h}from"./breadcrumb-store.51dbc2c4.js";import{d as k,u as P,a as E,r as B,c as N,o as Q,e as g,f as m,w as n,g as o,h as p,Q as s,i as q,j as L,l as R,m as $,n as y,p as S,t as f,q as V,s as T}from"./index.e5ec3fee.js";import{Q as I,a as j}from"./QTable.dbb6c7a0.js";import{C as w}from"./CategoryService.9ec93898.js";import{u as z}from"./use-quasar.2a01554d.js";import"./QList.138cbcc7.js";import"./QSelect.5c5caa48.js";import"./format.53708e68.js";import"./axios.e1b98896.js";const A={class:"q-pa-sm"},K=k({__name:"ListComponent",setup(x){P(),E();const i=z(),d=B(null),a=N({tableLoading:!1,tableRows:[],pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:20,rowsNumber:100,from:1,to:1},filters:{search:""}}),b=[{name:"name",label:"Categoria",align:"left",field:"name",sortable:!0,style:"width: 90%"},{name:"actions",label:"A\xE7\xE3o",align:"center",field:"actions",style:"width: 10%"}];Q(()=>{l()});function l(){d.value.requestServerInteraction()}async function _(r){a.tableLoading=!0;const{page:t,rowsPerPage:e,sortBy:c,descending:C}=r.pagination,{data:u}=await w.getCategories({page:t,sortBy:c,descending:C,rowsPerPage:e,...a.filters});a.tableRows=u.items,a.pagination={sortBy:c,descending:C,page:t,rowsPerPage:e,rowsNumber:u.total,from:u.from,to:u.to},a.tableLoading=!1}async function v(r,t){i.dialog({title:"Confirma\xE7\xE3o de exclus\xE3o",message:`Tem certeza de que deseja excluir a categoria ${t}?`,ok:{label:"Sim",push:!0,color:"positive"},cancel:{label:"Cancelar",color:"negative"}}).onOk(async()=>{(await w.deleteCategory(r)).status==200?(i.notify({type:"positive",message:"Categoria exclu\xEDda com sucesso!"}),l()):(i.dialog({title:"Erro na Solicita\xE7\xE3o",message:"Ocorreu um erro ao excluir a categoria. Por favor, tente novamente.",color:"negative",persistent:!0}),l())})}return(r,t)=>(g(),m(V,{class:"q-pa-sm"},{default:n(()=>[o($,{class:"justify-between"},{default:n(()=>[p("div",null,[o(s,{"no-caps":"",icon:"fa-solid fa-plus-circle",color:"primary",label:"Adicionar",onClick:t[0]||(t[0]=e=>r.$router.push("/categorias/adicionar"))})]),p("div",null,[o(q,{onKeyup:L(l,["enter"]),modelValue:a.filters.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.filters.search=e),outlined:"",dense:"",placeholder:"Pesquisa",style:{width:"600px"}},{append:n(()=>[o(R,{onClick:l,style:{cursor:"pointer"},name:"search"})]),_:1},8,["onKeyup","modelValue"])])]),_:1}),p("div",A,[o(j,{class:"table-striped col-12",flat:"",bordered:"",ref_key:"tableRef",ref:d,rows:a.tableRows,columns:b,"row-key":"id",separator:"cell",pagination:a.pagination,"onUpdate:pagination":t[2]||(t[2]=e=>a.pagination=e),"binary-state-sort":"",onRequest:_,"rows-per-page-options":[5,20,50,100],"no-data-label":"Nenhum registro encontrado","loading-label":"Buscando dados...","rows-per-page-label":"Registros por p\xE1gina",loading:a.tableLoading},{"body-cell-actions":n(e=>[o(I,{props:e},{default:n(()=>[o(s,{size:"sm",padding:"xs",color:"blue",round:"",dense:"",icon:"edit",title:"Editar",onClick:c=>r.$router.push(`/categorias/editar/${e.row.id}`)},null,8,["onClick"]),o(s,{size:"sm",padding:"xs",color:"red",round:"",dense:"",icon:"delete",class:"q-ml-sm",title:"Excluir",onClick:c=>v(e.row.id,e.row.name)},null,8,["onClick"])]),_:2},1032,["props"])]),pagination:n(e=>[e.pagesNumber>2?(g(),m(s,{key:0,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.firstPage},null,8,["disable","onClick"])):y("",!0),o(s,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),o(s,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"]),e.pagesNumber>2?(g(),m(s,{key:1,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.lastPage},null,8,["disable","onClick"])):y("",!0),S(" "+f(a.pagination.from)+" - "+f(a.pagination.to)+" de "+f(a.pagination.rowsNumber),1)]),_:1},8,["rows","pagination","loading"])])]),_:1}))}}),X=k({__name:"ListPage",setup(x){const i=h(),{setBreadcrumbs:d}=i;return T(()=>{d([{text:"Categorias",link:"/categorias"},{text:"Lista"}])}),(a,b)=>(g(),m(K))}});export{X as default};
