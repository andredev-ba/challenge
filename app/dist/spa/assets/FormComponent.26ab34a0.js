import{d as x,u as _,a as b,c as h,r as q,o as w,e as Q,f as k,w as d,g as s,h as m,i as R,Q as p,m as V,q as z}from"./index.e5ec3fee.js";import{C as c}from"./CategoryService.9ec93898.js";import{u as B}from"./use-quasar.2a01554d.js";const P={class:"col-12"},O=x({__name:"FormComponent",props:["action"],setup(f){const r=f,l=_(),i=b(),o=B(),t=h({name:""}),n=q(null),g=[a=>!!a||"Este campo \xE9 obrigat\xF3rio"];w(()=>{r.action=="edit"&&E()});function v(){if(n.value.validate(),n.value.hasError)return o.notify({color:"negative",message:"Preencha os campos obrigat\xF3rios"}),!1;r.action=="add"?C():y()}async function C(){(await c.addCategory(t)).status==201?(o.notify({color:"positive",message:"Categoria adicionada com sucesso!"}),i.push("/categorias")):o.dialog({title:"Erro na Solicita\xE7\xE3o",message:"Ocorreu um erro ao adicionar a categoria. Por favor, tente novamente.",color:"negative",persistent:!0})}async function y(){const a=l.params.uuid;(await c.updateCategory(t,a)).status==200?(o.notify({color:"positive",message:"Categoria atualizada com sucesso!"}),i.push("/categorias")):o.dialog({title:"Erro na Solicita\xE7\xE3o",message:"Ocorreu um erro ao atualizar a categoria. Por favor, tente novamente.",color:"negative",persistent:!0})}async function E(){const a=l.params.uuid,e=await c.loadCategory(a);e.status==200?t.name=e.data.name:(o.dialog({title:"Erro na Solicita\xE7\xE3o",message:"Ocorreu um erro ao carregar a categoria. Por favor, tente novamente.",color:"negative",persistent:!0}),i.push("/categorias"))}return(a,e)=>(Q(),k(z,{flat:"",class:"q-pa-sm"},{default:d(()=>[s(V,{class:"row q-col-gutter-md"},{default:d(()=>[m("div",P,[s(R,{ref_key:"nameRef",ref:n,rules:g,modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=u=>t.name=u),dense:"",outlined:"","lazy-rules":"",label:"Nome da categoria *"},null,8,["modelValue"])]),m("div",null,[s(p,{onClick:v,"no-caps":"",icon:"fa-solid fa-save",color:"positive",label:r.action=="add"?"Cadastrar":"Atualizar"},null,8,["label"]),s(p,{"no-caps":"",class:"q-ml-sm",icon:"fa-solid fa-close",color:"negative",label:"Cancelar",onClick:e[1]||(e[1]=u=>a.$router.push("/categorias"))})])]),_:1})]),_:1}))}});export{O as _};
